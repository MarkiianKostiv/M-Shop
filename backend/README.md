# E-commerce API

## Опис

Цей проект представляє собою REST API для e-commerce платформи. API надає можливості для реєстрації користувачів, управління кошиком, продуктами, купонами, а також обробку платежів.

## Стек технологій

- Node.js
- Express.js
- MongoDB
- Mongoose
- Stripe

## Встановлення

1. Клонуйте цей репозиторій:

   ```bash
   git clone https://github.com/your-repository-url.git
   ```

2. Встановіть залежності:

   ```bash
   npm install
   ```

3. Створіть файл `.env` з такими змінними:

   ```env
   MONGO_URI=your-mongo-db-uri
   JWT_SECRET=your-jwt-secret
   STRIPE_SECRET_KEY=your-stripe-secret-key
   ```

4. Запустіть сервер:

   ```bash
   npm run dev
   ```

## Роутінг API

### 1. Авторизація (Auth)

Ці маршрути забезпечують реєстрацію, вхід/вихід користувачів та управління токенами.

| Метод  | Роут            | Опис                          |
| ------ | --------------- | ----------------------------- |
| `POST` | `/auth/sign-up` | Реєстрація нового користувача |
| `POST` | `/auth/login`   | Вхід користувача              |
| `POST` | `/auth/logout`  | Вихід користувача             |
| `POST` | `/auth/refresh` | Оновлення токену доступу      |
| `GET`  | `/auth/profile` | Отримання даних користувача   |

### 2. Кошик (Cart)

Маршрути для роботи з кошиком користувача.

| Метод    | Роут            | Опис                                |
| -------- | --------------- | ----------------------------------- |
| `POST`   | `/cart/`        | Додавання продукту до кошика        |
| `GET`    | `/cart/`        | Отримання продуктів у кошику        |
| `DELETE` | `/cart/delete`  | Видалення всіх продуктів з кошика   |
| `PUT`    | `/cart/add/:id` | Оновлення кількості товару в кошику |

### 3. Продукти (Products)

Маршрути для управління товарами на платформі.

| Метод    | Роут                       | Опис                                                   |
| -------- | -------------------------- | ------------------------------------------------------ |
| `GET`    | `/product/`                | Отримання всіх продуктів (для адміністратора)          |
| `GET`    | `/product/featured`        | Отримання популярних продуктів                         |
| `GET`    | `/product/recommendations` | Отримання рекомендованих продуктів                     |
| `GET`    | `/product/category/:name`  | Отримання продуктів за категорією                      |
| `POST`   | `/product/add`             | Додавання нового продукту (тільки для адміністратора)  |
| `DELETE` | `/product/delete/:id`      | Видалення продукту (тільки для адміністратора)         |
| `PATCH`  | `/product/update/:id`      | Оновлення статусу продукту (тільки для адміністратора) |

### 4. Купони (Coupons)

Маршрути для управління купонами.

| Метод  | Роут                | Опис                                       |
| ------ | ------------------- | ------------------------------------------ |
| `GET`  | `/coupons/`         | Отримання активних купонів для користувача |
| `POST` | `/coupons/validate` | Валідація купону                           |

### 5. Платежі (Payments)

Маршрути для роботи з платежами через Stripe.

| Метод  | Роут                               | Опис                       |
| ------ | ---------------------------------- | -------------------------- |
| `POST` | `/payment/create-checkout-session` | Створення сесії для оплати |
| `POST` | `/payment/checkout-success`        | Обробка успішної оплати    |

### 6. Аналітика (Analytics)

Маршрути для отримання аналітичних даних.

| Метод | Роут          | Опис                                                                        |
| ----- | ------------- | --------------------------------------------------------------------------- |
| `GET` | `/analytics/` | Отримання загальної аналітики (кількість користувачів, продуктів, продажів) |

## Вимоги до безпеки

Для доступу до захищених маршрутів використовується токен JWT. Для цього потрібно передавати `Authorization` заголовок з токеном у форматі:

Authorization: Bearer <your-token>

## Структура проекту

- `/controllers` — контролери для обробки логіки запитів
- `/middleware` — проміжні шари для аутентифікації та авторизації
- `/models` — моделі Mongoose для MongoDB
- `/routes` — файли з маршрутизацією API
- `/schemas` — схеми для валідації даних

## Ліцензія

Цей проект ліцензований за MIT License. Для детальної інформації перегляньте файл [LICENSE](LICENSE).
